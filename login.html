<!doctype html>
<html lang="en">

<head>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3595712894194617"
    crossorigin="anonymous"></script>
  <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
  <meta charset="utf-8">
  <title>Member Login - BLACKPINK SRI LANKA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/bootstrap.css">
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/auth.css">
</head>

<body class="auth-body">

  <!-- Animated background elements -->
  <div class="auth-bg">
    <div class="auth-bg-glow auth-bg-glow--1"></div>
    <div class="auth-bg-glow auth-bg-glow--2"></div>
    <div class="auth-bg-glow auth-bg-glow--3"></div>
    <div class="auth-sparkles">
      <span class="sparkle" style="top:10%;left:15%;animation-delay:0s">&#10022;</span>
      <span class="sparkle" style="top:20%;right:20%;animation-delay:1.2s">&#10022;</span>
      <span class="sparkle" style="bottom:30%;left:10%;animation-delay:2.4s">&#9825;</span>
      <span class="sparkle" style="bottom:15%;right:15%;animation-delay:0.8s">&#10022;</span>
      <span class="sparkle" style="top:50%;left:5%;animation-delay:1.8s">&#10022;</span>
      <span class="sparkle" style="top:40%;right:8%;animation-delay:3s">&#9825;</span>
    </div>
  </div>

  <!-- Floating nav bar -->
  <nav class="auth-nav">
    <a class="auth-nav-brand" href="index.html">
      <span>Members Section</span>
    </a>
    <a href="index.html" class="auth-nav-back">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
      Back to site
    </a>
  </nav>

  <div class="auth-container">
    <div class="auth-card">

      <!-- Glowing border effect -->
      <div class="auth-card-glow"></div>

      <!-- Stage Indicators (only for signup flow) -->
      <div class="stage-indicators hidden" id="stageIndicators">
        <div class="stage-step" id="stage1Dot">
          <div class="stage-step-circle">1</div>
          <span class="stage-step-label">Phone</span>
        </div>
        <div class="stage-step-line"></div>
        <div class="stage-step" id="stage2Dot">
          <div class="stage-step-circle">2</div>
          <span class="stage-step-label">Verify</span>
        </div>
        <div class="stage-step-line"></div>
        <div class="stage-step" id="stage3Dot">
          <div class="stage-step-circle">3</div>
          <span class="stage-step-label">Account</span>
        </div>
      </div>

      <!-- Error/Success Messages -->
      <div id="messageContainer"></div>

      <!-- STAGE 1: Phone Number Entry -->
      <div id="stage1" class="auth-stage hidden">
        <div class="auth-header">
          <div class="auth-logo-badge">
            <img src="assets/bpsl_website_logo.png" alt="BPSL Logo" style="width: 80px;">
          </div>
          <h2>Member Login</h2>
          <p>Enter your phone number to get started</p>
        </div>

        <form id="phoneForm" class="auth-form">
          <div class="form-group">
            <label for="phoneNumber">Phone Number</label>
            <div class="input-wrapper">
              <svg class="input-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
              <input
                type="tel"
                class="form-control"
                id="phoneNumber"
                placeholder="0771234567 or +94771234567"
                required
              >
            </div>
            <small class="auth-helper-text">Enter your BPSL community <span style="color: #25D366;">WhatsApp</span> number</small>
          </div>

          <button type="submit" class="btn auth-btn auth-btn-primary" id="phoneSubmitBtn">
            <span>Next</span>
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
          </button>
        </form>

        <div class="auth-footer-link">
          <p>Already have an account? <a href="#" class="auth-link" id="showLoginLink">Login here</a></p>
        </div>
      </div>

      <!-- STAGE 2: OTP Verification -->
      <div id="stage2" class="auth-stage hidden">
        <div class="auth-header">
          <div class="auth-logo-badge">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
          </div>
          <h2>Verify Code</h2>
          <p>Enter the 6-digit code sent to your <span style="color: #25D366;">WhatsApp</span></p>
        </div>

        <form id="otpForm" class="auth-form">
          <div class="form-group">
            <label for="otpCode">Verification Code</label>
            <div class="input-wrapper">
              <svg class="input-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
              <input
                type="text"
                class="form-control otp-input"
                id="otpCode"
                placeholder="000000"
                maxlength="6"
                pattern="[0-9]{6}"
                required
              >
            </div>
          </div>

          <button type="submit" class="btn auth-btn auth-btn-primary" id="otpSubmitBtn">
            <span>Verify</span>
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
          </button>
        </form>

        <div class="auth-footer-link">
          <p><a href="#" class="auth-link" id="resendOtpLink">Resend code</a> &middot;
             <a href="#" class="auth-link" id="startOverLink">Start over</a></p>
        </div>
      </div>

      <!-- STAGE 3: Account Creation -->
      <div id="stage3" class="auth-stage hidden">
        <div class="auth-header">
          <div class="auth-logo-badge">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
          </div>
          <h2>Create Account</h2>
          <p>Choose your username and password</p>
        </div>

        <form id="accountForm" class="auth-form">
          <div class="form-group">
            <label for="username">Username</label>
            <div class="input-wrapper">
              <svg class="input-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
              <input
                type="text"
                class="form-control"
                id="username"
                placeholder="Choose a username"
                required
              >
            </div>
          </div>

          <div class="form-group">
            <label for="password">Password</label>
            <div class="input-wrapper">
              <svg class="input-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
              <input
                type="password"
                class="form-control"
                id="password"
                placeholder="At least 8 characters"
                minlength="8"
                required
              >
            </div>
          </div>

          <button type="submit" class="btn auth-btn auth-btn-primary" id="accountSubmitBtn">
            <span>Create Account</span>
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
          </button>
        </form>
      </div>

      <!-- EXISTING USER LOGIN -->
      <div id="loginStage" class="auth-stage">
        <div class="auth-header">
          <div class="auth-logo-badge">
            <img src="assets/bpsl_website_logo.png" alt="BPSL Logo" style="width: 80px;">
          </div>
          <h2>Welcome Back</h2>
          <p>Login to your account</p>
        </div>

        <form id="loginForm" class="auth-form">
          <div class="form-group">
            <label for="loginUsername">Username</label>
            <div class="input-wrapper">
              <svg class="input-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
              <input
                type="text"
                class="form-control"
                id="loginUsername"
                placeholder="Your username"
                required
              >
            </div>
          </div>

          <div class="form-group">
            <label for="loginPassword">Password</label>
            <div class="input-wrapper">
              <svg class="input-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
              <input
                type="password"
                class="form-control"
                id="loginPassword"
                placeholder="Your password"
                required
              >
            </div>
          </div>

          <button type="submit" class="btn auth-btn auth-btn-primary" id="loginSubmitBtn">
            <span>Login</span>
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
          </button>
        </form>

        <div class="auth-footer-link">
          <p>Don't have an account? <a href="#" class="auth-link" id="showSignupLink">Sign up here</a></p>
        </div>
      </div>

    </div>

    <!-- Bottom branding -->
    <div class="auth-brand-footer">
      <span>BLACKPINK SRI LANKA</span>
    </div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

  <!-- Configuration and Auth Scripts -->
  <script src=".env.js"></script>
  <script src="js/config.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/phone-verification.js"></script>
  <script src="js/support.js"></script>

  <!-- Login Page Script -->
  <script src="js/login.js"></script>

</body>

</html>
